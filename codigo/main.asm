.INCLUDE 	"M328PDEF.INC"

.CSEG

.ORG 	0x00
	RJMP	MAIN
.ORG 	0x02
	RJMP 	EXT_INT0
.ORG 	0x1E
	RJMP	TIM1_OVF

;INTERRUPCIONES



.ORG 	INT_VECTORS_SIZE
MAIN:
	ldi r16,low(RAMEND)
	out spl,r16
	ldi r16,high(RAMEND)
	out sph,r16
	
	SBI DDRB,5

	
	RCALL	MOVEMENT_SETUP
;	RCALL 	HCSR04_SETUP
;	CLR 	R21
;	CLR		R22

MAIN_LOOP:

	RCALL 	MOVEMENT_TEST

	RJMP 	MAIN_LOOP


TURN_ON:
	SBI PORTB,5
	RET


TURN_OFF:
	CBI PORTB,5
	RET



;error
ERRLOOP:
	RJMP	ERRLOOP


.INCLUDE 	"MOVEMENT.INC"
.INCLUDE 	"HCSR04.INC"
